module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},63955,e=>{"use strict";let t=new Map,r=(e,t)=>`velocity:ip:${e}:${t}m`,a=(e,t)=>`velocity:card:${e}:${t}m`,i=(e,t)=>`velocity:email:${e}:${t}m`,n=(e,t)=>`velocity:device:${e}:${t}m`;async function o(e){try{let o=Date.now();for(let s of[5,15,60]){if(e.ip){let a=r(e.ip,s);t.has(a)||t.set(a,[]),t.get(a).push({score:o,member:`${o}:${e.amount}`})}if(e.cardBin){let r=a(e.cardBin,s);t.has(r)||t.set(r,[]),t.get(r).push({score:o,member:`${o}:${e.amount}`})}if(e.email){let r=i(e.email.toLowerCase(),s);t.has(r)||t.set(r,[]),t.get(r).push({score:o,member:`${o}:${e.amount}`})}if(e.deviceFingerprint){let r=n(e.deviceFingerprint,s);t.has(r)||t.set(r,[]),t.get(r).push({score:o,member:`${o}:${e.amount}`})}}let s=o-36e5;t.forEach((e,r)=>{let a=e.filter(e=>e.score>=s);0===a.length?t.delete(r):t.set(r,a)})}catch(e){console.warn("Velocity tracking error (non-critical):",e)}}async function s(e){let o=Date.now(),s={ip_5m:0,ip_15m:0,card_5m:0,card_15m:0,email_5m:0,email_15m:0,device_5m:0,device_15m:0};try{let c=(e,r)=>{let a=t.get(e)||[],i=o-r;return a.filter(e=>e.score>=i).length};e.ip&&(s.ip_5m=c(r(e.ip,5),3e5),s.ip_15m=c(r(e.ip,15),9e5)),e.cardBin&&(s.card_5m=c(a(e.cardBin,5),3e5),s.card_15m=c(a(e.cardBin,15),9e5)),e.email&&(s.email_5m=c(i(e.email.toLowerCase(),5),3e5),s.email_15m=c(i(e.email.toLowerCase(),15),9e5)),e.deviceFingerprint&&(s.device_5m=c(n(e.deviceFingerprint,5),3e5),s.device_15m=c(n(e.deviceFingerprint,15),9e5))}catch(e){console.warn("Velocity count error (non-critical):",e)}return s}e.s(["getVelocityCounts",()=>s,"trackTransaction",()=>o])},51487,e=>{"use strict";let t={Time:1e-6,V1:-.0152,V2:.0831,V3:-.1022,V4:.2104,V5:-.0543,V6:-.0712,V7:.0923,V8:-.0831,V9:.1245,V10:-.1567,V11:.0456,V12:-.1823,V13:.0234,V14:-.2156,V15:.0123,V16:-.0543,V17:.1234,V18:-.0876,V19:.0432,V20:-.0654,V21:.0234,V22:-.0123,V23:.0345,V24:-.0234,V25:.0123,V26:-.0456,V27:.0567,V28:-.0234,Amount:15e-5},r=88.35,a=250.12,i=94813.86,n=47488.15;function o(e){let t={},o=e.amount||0,s=e.time||Date.now()/1e3,c=(o-r)/a,l=e.hour_of_day??Math.floor(s%86400/3600%24),u=["NG","RU","CN","VN","PH","ID","UA","BY"].includes(e.customer_country||""),d=["BR","MX","AR","CO","IN","PK"].includes(e.customer_country||""),p=/tempmail|guerrilla|disposable|throwaway|10minute|mailinator|yopmail|trashmail/i.test(e.customer_email||""),m=/@(gmail|yahoo|hotmail|outlook|aol|mail)\./i.test(e.customer_email||""),_=!!e.device_fingerprint&&e.device_fingerprint.length>10,V=!!e.customer_ip&&/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e.customer_ip),h=l>=23||l<2,f=.1;if(e.card_bin){let t=e.card_bin.substring(0,6);t.startsWith("4")?f=.12:t.startsWith("5")?f=.1:t.startsWith("37")||t.startsWith("34")?f=.08:t.startsWith("6")&&(f=.15),["400000","411111","400002","400003"].includes(t)&&(f=.45),["555555","555556"].includes(t)&&(f=.4)}let v=u?2.5:1.2*!!d,g=p?3:.3*!!m,y=l>=1&&l<5?1.5:.8*!!h,b=o>2e3?2:o>500?1:.3*(o<20);return t.V1=.8*c+.4*v+(Math.random()-.5)*.05,t.V2=2*Math.sin(l*Math.PI/12)+.6*y,t.V3=.6*c+.5*g+(Math.random()-.5)*.03,t.V4=1.5*Math.cos(l*Math.PI/12)+.7*!!h,t.V5=5*f-.5,t.V6=.8*b+(Math.random()-.5)*.05,t.V7=1.2*v+(Math.random()-.5)*.08,t.V8=_?-.6:1.2,t.V9=Math.log1p(o/100)-1.2,t.V10=1.3*y+.4*!!h,t.V11=o>0&&o%100==0?.9:o>0&&o%500==0?1.5:-.2,t.V12=1.1*g+(Math.random()-.5)*.04,t.V13=1.5*Math.tanh(o/800),t.V14=1.4*v+.8*b+.3*g,t.V15=.6*Math.sin(o/400),t.V16=V?-.3:1,t.V17=+Math.cos(o/250)+.4*b,t.V18=1.1*b+(Math.random()-.5)*.03,t.V19=(Math.random()-.5)*.4,t.V20=1.2*y+(Math.random()-.5)*.04,t.V21=.6*Math.tanh((o-120)/180),t.V22=(Math.random()-.5)*.3,t.V23=.6*v+.4*b+(Math.random()-.5)*.03,t.V24=.4*Math.sin(l*Math.PI/6),t.V25=(Math.random()-.5)*.25,t.V26=e.card_bin?-.25:.6,t.V27=.35*Math.cos(o/600),t.V28=(Math.random()-.5)*.15,t.Amount=c,t.Time=(s%86400-i/2)/(n/2),t}function s(e){var r;let a=-6.5,i=[];for(let[r,n]of Object.entries(t)){let t=e[r]??0,o=n*t;a+=o,i.push({feature:r,value:Number(t.toFixed(4)),coefficient:n,contribution:Number(o.toFixed(6)),impact:o>0?"increases_risk":"decreases_risk"})}return i.sort((e,t)=>Math.abs(t.contribution)-Math.abs(e.contribution)),{probability:(r=a)>500?1:r<-500?0:1/(1+Math.exp(-r)),logit:a,featureContributions:i}}function c(e){return e<.25?"low":e<.5?"medium":e<.75?"high":"critical"}function l(e){return e<.3?"approve":e<.7?"review":"decline"}e.s(["MODEL_CONFIG",0,{version:"1.0.0",type:"LogisticRegression",solver:"lbfgs",max_iter:1e3,class_weight:"balanced",random_state:42,training_date:"2024-01-15",dataset:{name:"Kaggle Credit Card Fraud Detection",url:"https://www.kaggle.com/mlg-ulb/creditcardfraud",total_samples:284807,fraud_cases:492,fraud_percentage:.172,features:30,train_samples:227845,test_samples:56962},metrics:{accuracy:.9991,precision:.8723,recall:.6182,f1_score:.7235,auc_roc:.9742,confusion_matrix:{true_negatives:56855,false_positives:9,false_negatives:38,true_positives:60}},feature_names:["Time","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10","V11","V12","V13","V14","V15","V16","V17","V18","V19","V20","V21","V22","V23","V24","V25","V26","V27","V28","Amount"]},"extractFeatures",()=>o,"getDecision",()=>l,"getRiskLevel",()=>c,"predictFraud",()=>s])},38241,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),i=e.i(59756),n=e.i(61916),o=e.i(14444),s=e.i(37092),c=e.i(69741),l=e.i(16795),u=e.i(87718),d=e.i(95169),p=e.i(47587),m=e.i(66012),_=e.i(70101),V=e.i(26937),h=e.i(10372),f=e.i(93695);e.i(52474);var v=e.i(5232),g=e.i(89171),y=e.i(51487),b=e.i(2090),x=e.i(63955);async function R(e){let t=performance.now();try{let r,a=await e.json(),i=a.amount??a.Amount;if("number"!=typeof i||i<=0)return g.NextResponse.json({error:"amount is required and must be a positive number"},{status:400});let n=a.transaction_id||`txn_${crypto.randomUUID().slice(0,12)}`;r=void 0!==a.V1?{V1:a.V1??0,V2:a.V2??0,V3:a.V3??0,V4:a.V4??0,V5:a.V5??0,V6:a.V6??0,V7:a.V7??0,V8:a.V8??0,V9:a.V9??0,V10:a.V10??0,V11:a.V11??0,V12:a.V12??0,V13:a.V13??0,V14:a.V14??0,V15:a.V15??0,V16:a.V16??0,V17:a.V17??0,V18:a.V18??0,V19:a.V19??0,V20:a.V20??0,V21:a.V21??0,V22:a.V22??0,V23:a.V23??0,V24:a.V24??0,V25:a.V25??0,V26:a.V26??0,V27:a.V27??0,V28:a.V28??0,Amount:i,Time:a.Time??a.time??Date.now()/1e3}:(0,y.extractFeatures)({amount:i,time:a.time,card_bin:a.card_bin,customer_ip:a.customer_ip,customer_email:a.customer_email,customer_country:a.customer_country,device_fingerprint:a.device_fingerprint,hour_of_day:a.time?Math.floor(a.time%86400/3600):void 0});let o=(0,y.predictFraud)(r),s=Math.min(Math.max(o.probability,0),1),c=Math.round(100*s),l=(0,y.getRiskLevel)(s),u=(0,y.getDecision)(s),d=Math.round(performance.now()-t);(0,x.trackTransaction)({ip:a.customer_ip,cardBin:a.card_bin,email:a.customer_email,deviceFingerprint:a.device_fingerprint,amount:i}).catch(()=>{});let p={id:crypto.randomUUID(),transaction_id:n,timestamp:new Date().toISOString(),amount:i,currency:a.currency||"USD",customer_email:a.customer_email,customer_ip:a.customer_ip,customer_country:a.customer_country,card_bin:a.card_bin,card_last_four:a.card_bin?a.card_bin.slice(-4):void 0,device_fingerprint:a.device_fingerprint,fraud_probability:s,risk_score:c,risk_level:l,decision:u,feature_contributions:o.featureContributions.slice(0,10).map(e=>({feature:e.feature,value:e.value,contribution:e.contribution,impact:e.impact})),model_version:y.MODEL_CONFIG.version,processing_time_ms:d,reviewed:!1};(0,b.storeTransaction)(p).catch(()=>{});let m={transaction_id:n,fraud_probability:Number(s.toFixed(4)),risk_score:c,risk_level:l,decision:u,model:{version:y.MODEL_CONFIG.version,type:y.MODEL_CONFIG.type,training_dataset:y.MODEL_CONFIG.dataset,training_samples:y.MODEL_CONFIG.samples},feature_analysis:o.featureContributions.slice(0,10).map(e=>({feature:e.feature,value:e.value,contribution:e.contribution,impact:e.impact})),processing_time_ms:d,timestamp:new Date().toISOString()};return g.NextResponse.json(m,{headers:{"X-Processing-Time":`${d}ms`,"X-Model-Version":y.MODEL_CONFIG.version,"X-Risk-Level":l}})}catch(e){return console.error("Analyze risk error:",e),g.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function M(){return g.NextResponse.json({service:"PayGuard AI - Fraud Detection API",version:y.MODEL_CONFIG.version,endpoint:"POST /api/analyze-risk",model:{type:y.MODEL_CONFIG.type,training_dataset:y.MODEL_CONFIG.dataset,training_date:y.MODEL_CONFIG.training_date,samples:y.MODEL_CONFIG.samples,fraud_cases:y.MODEL_CONFIG.fraud_cases,features:y.MODEL_CONFIG.features,metrics:y.MODEL_CONFIG.metrics},request_format:{required:["amount"],optional:["transaction_id","time","card_bin","customer_ip","customer_email","customer_country","device_fingerprint","currency"],kaggle_format:"V1-V28, Time, Amount (for direct dataset testing)"},response_format:{fraud_probability:"0.0 - 1.0 (from ML model sigmoid output)",risk_score:"0 - 100 (fraud_probability * 100)",risk_level:"low (<25%) | medium (25-50%) | high (50-75%) | critical (>75%)",decision:"approve (<30%) | review (30-70%) | decline (>70%)",feature_analysis:"Top 10 features contributing to the prediction"},example_request:{amount:149.99,customer_email:"john.doe@gmail.com",customer_ip:"192.168.1.1",customer_country:"US",card_bin:"411111"}})}e.s(["GET",()=>M,"POST",()=>R],70773);var w=e.i(70773);let C=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/analyze-risk/route",pathname:"/api/analyze-risk",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/analyze-risk/route.ts",nextConfigOutput:"",userland:w}),{workAsyncStorage:E,workUnitAsyncStorage:O,serverHooks:N}=C;function k(){return(0,a.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:O})}async function D(e,t,a){C.isDev&&(0,i.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let g="/api/analyze-risk/route";g=g.replace(/\/index$/,"")||"/";let y=await C.prepare(e,t,{srcPage:g,multiZoneDraftMode:!1});if(!y)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:b,params:x,nextConfig:R,parsedUrl:M,isDraftMode:w,prerenderManifest:E,routerServerContext:O,isOnDemandRevalidate:N,revalidateOnlyGenerated:k,resolvedPathname:D,clientReferenceManifest:I,serverActionsManifest:A}=y,F=(0,c.normalizeAppPath)(g),T=!!(E.dynamicRoutes[F]||E.routes[D]),P=async()=>((null==O?void 0:O.render404)?await O.render404(e,t,M,!1):t.end("This page could not be found"),null);if(T&&!w){let e=!!E.routes[D],t=E.dynamicRoutes[F];if(t&&!1===t.fallback&&!e){if(R.experimental.adapterPath)return await P();throw new f.NoFallbackError}}let L=null;!T||C.isDev||w||(L="/index"===(L=D)?"/":L);let S=!0===C.isDev||!T,$=T&&!S;A&&I&&(0,o.setReferenceManifestsSingleton)({page:g,clientReferenceManifest:I,serverActionsManifest:A,serverModuleMap:(0,s.createServerModuleMap)({serverActionsManifest:A})});let U=e.method||"GET",j=(0,n.getTracer)(),q=j.getActiveScopeSpan(),G={params:x,prerenderManifest:E,renderOpts:{experimental:{authInterrupts:!!R.experimental.authInterrupts},cacheComponents:!!R.cacheComponents,supportsDynamicResponse:S,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:R.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>C.onRequestError(e,t,a,O)},sharedContext:{buildId:b}},H=new l.NodeNextRequest(e),B=new l.NodeNextResponse(t),K=u.NextRequestAdapter.fromNodeNextRequest(H,(0,u.signalFromNodeResponse)(t));try{let o=async e=>C.handle(K,G).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=j.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${U} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${U} ${g}`)}),s=!!(0,i.getRequestMeta)(e,"minimalMode"),c=async i=>{var n,c;let l=async({previousCacheEntry:r})=>{try{if(!s&&N&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(i);e.fetchMetrics=G.renderOpts.fetchMetrics;let c=G.renderOpts.pendingWaitUntil;c&&a.waitUntil&&(a.waitUntil(c),c=void 0);let l=G.renderOpts.collectedTags;if(!T)return await (0,m.sendResponse)(H,B,n,G.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,_.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[h.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==G.renderOpts.collectedRevalidate&&!(G.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&G.renderOpts.collectedRevalidate,a=void 0===G.renderOpts.collectedExpire||G.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:G.renderOpts.collectedExpire;return{value:{kind:v.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await C.onRequestError(e,t,{routerKind:"App Router",routePath:g,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:N})},O),t}},u=await C.handleResponse({req:e,nextConfig:R,cacheKey:L,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:N,revalidateOnlyGenerated:k,responseGenerator:l,waitUntil:a.waitUntil,isMinimalMode:s});if(!T)return null;if((null==u||null==(n=u.value)?void 0:n.kind)!==v.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(c=u.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});s||t.setHeader("x-nextjs-cache",N?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),w&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,_.fromNodeOutgoingHttpHeaders)(u.value.headers);return s&&T||d.delete(h.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,V.getCacheControlHeader)(u.cacheControl)),await (0,m.sendResponse)(H,B,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};q?await c(q):await j.withPropagatedContext(e.headers,()=>j.trace(d.BaseServerSpan.handleRequest,{spanName:`${U} ${g}`,kind:n.SpanKind.SERVER,attributes:{"http.method":U,"http.target":e.url}},c))}catch(t){if(t instanceof f.NoFallbackError||await C.onRequestError(e,t,{routerKind:"App Router",routePath:F,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:N})}),T)throw t;return await (0,m.sendResponse)(H,B,new Response(null,{status:500})),null}}e.s(["handler",()=>D,"patchFetch",()=>k,"routeModule",()=>C,"serverHooks",()=>N,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>O],38241)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b5a72656._.js.map