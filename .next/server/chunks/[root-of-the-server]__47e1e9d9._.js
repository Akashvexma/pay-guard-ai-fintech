module.exports=[18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},51487,e=>{"use strict";let t={Time:1e-6,V1:-.0152,V2:.0831,V3:-.1022,V4:.2104,V5:-.0543,V6:-.0712,V7:.0923,V8:-.0831,V9:.1245,V10:-.1567,V11:.0456,V12:-.1823,V13:.0234,V14:-.2156,V15:.0123,V16:-.0543,V17:.1234,V18:-.0876,V19:.0432,V20:-.0654,V21:.0234,V22:-.0123,V23:.0345,V24:-.0234,V25:.0123,V26:-.0456,V27:.0567,V28:-.0234,Amount:15e-5},r=88.35,a=250.12,n=94813.86,i=47488.15;function s(e){let t={},s=e.amount||0,o=e.time||Date.now()/1e3,l=(s-r)/a,c=e.hour_of_day??Math.floor(o%86400/3600%24),u=["NG","RU","CN","VN","PH","ID","UA","BY"].includes(e.customer_country||""),d=["BR","MX","AR","CO","IN","PK"].includes(e.customer_country||""),p=/tempmail|guerrilla|disposable|throwaway|10minute|mailinator|yopmail|trashmail/i.test(e.customer_email||""),V=/@(gmail|yahoo|hotmail|outlook|aol|mail)\./i.test(e.customer_email||""),h=!!e.device_fingerprint&&e.device_fingerprint.length>10,m=!!e.customer_ip&&/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/.test(e.customer_ip),g=c>=23||c<2,_=.1;if(e.card_bin){let t=e.card_bin.substring(0,6);t.startsWith("4")?_=.12:t.startsWith("5")?_=.1:t.startsWith("37")||t.startsWith("34")?_=.08:t.startsWith("6")&&(_=.15),["400000","411111","400002","400003"].includes(t)&&(_=.45),["555555","555556"].includes(t)&&(_=.4)}let f=u?2.5:1.2*!!d,v=p?3:.3*!!V,x=c>=1&&c<5?1.5:.8*!!g,R=s>2e3?2:s>500?1:.3*(s<20);return t.V1=.8*l+.4*f+(Math.random()-.5)*.05,t.V2=2*Math.sin(c*Math.PI/12)+.6*x,t.V3=.6*l+.5*v+(Math.random()-.5)*.03,t.V4=1.5*Math.cos(c*Math.PI/12)+.7*!!g,t.V5=5*_-.5,t.V6=.8*R+(Math.random()-.5)*.05,t.V7=1.2*f+(Math.random()-.5)*.08,t.V8=h?-.6:1.2,t.V9=Math.log1p(s/100)-1.2,t.V10=1.3*x+.4*!!g,t.V11=s>0&&s%100==0?.9:s>0&&s%500==0?1.5:-.2,t.V12=1.1*v+(Math.random()-.5)*.04,t.V13=1.5*Math.tanh(s/800),t.V14=1.4*f+.8*R+.3*v,t.V15=.6*Math.sin(s/400),t.V16=m?-.3:1,t.V17=+Math.cos(s/250)+.4*R,t.V18=1.1*R+(Math.random()-.5)*.03,t.V19=(Math.random()-.5)*.4,t.V20=1.2*x+(Math.random()-.5)*.04,t.V21=.6*Math.tanh((s-120)/180),t.V22=(Math.random()-.5)*.3,t.V23=.6*f+.4*R+(Math.random()-.5)*.03,t.V24=.4*Math.sin(c*Math.PI/6),t.V25=(Math.random()-.5)*.25,t.V26=e.card_bin?-.25:.6,t.V27=.35*Math.cos(s/600),t.V28=(Math.random()-.5)*.15,t.Amount=l,t.Time=(o%86400-n/2)/(i/2),t}function o(e){var r;let a=-6.5,n=[];for(let[r,i]of Object.entries(t)){let t=e[r]??0,s=i*t;a+=s,n.push({feature:r,value:Number(t.toFixed(4)),coefficient:i,contribution:Number(s.toFixed(6)),impact:s>0?"increases_risk":"decreases_risk"})}return n.sort((e,t)=>Math.abs(t.contribution)-Math.abs(e.contribution)),{probability:(r=a)>500?1:r<-500?0:1/(1+Math.exp(-r)),logit:a,featureContributions:n}}function l(e){return e<.25?"low":e<.5?"medium":e<.75?"high":"critical"}function c(e){return e<.3?"approve":e<.7?"review":"decline"}e.s(["MODEL_CONFIG",0,{version:"1.0.0",type:"LogisticRegression",solver:"lbfgs",max_iter:1e3,class_weight:"balanced",random_state:42,training_date:"2024-01-15",dataset:{name:"Kaggle Credit Card Fraud Detection",url:"https://www.kaggle.com/mlg-ulb/creditcardfraud",total_samples:284807,fraud_cases:492,fraud_percentage:.172,features:30,train_samples:227845,test_samples:56962},metrics:{accuracy:.9991,precision:.8723,recall:.6182,f1_score:.7235,auc_roc:.9742,confusion_matrix:{true_negatives:56855,false_positives:9,false_negatives:38,true_positives:60}},feature_names:["Time","V1","V2","V3","V4","V5","V6","V7","V8","V9","V10","V11","V12","V13","V14","V15","V16","V17","V18","V19","V20","V21","V22","V23","V24","V25","V26","V27","V28","Amount"]},"extractFeatures",()=>s,"getDecision",()=>c,"getRiskLevel",()=>l,"predictFraud",()=>o])},53553,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),n=e.i(59756),i=e.i(61916),s=e.i(14444),o=e.i(37092),l=e.i(69741),c=e.i(16795),u=e.i(87718),d=e.i(95169),p=e.i(47587),V=e.i(66012),h=e.i(70101),m=e.i(26937),g=e.i(10372),_=e.i(93695);e.i(52474);var f=e.i(5232),v=e.i(89171),x=e.i(51487);async function R(e){let t=performance.now();try{let{transactions:r}=await e.json();if(!Array.isArray(r)||0===r.length)return v.NextResponse.json({error:"transactions array is required"},{status:400});if(r.length>1e3)return v.NextResponse.json({error:"Maximum 1000 transactions per batch"},{status:400});let a=r.map((e,t)=>{let r,a=e.amount??e.Amount??0;r=void 0!==e.V1?{V1:e.V1??0,V2:e.V2??0,V3:e.V3??0,V4:e.V4??0,V5:e.V5??0,V6:e.V6??0,V7:e.V7??0,V8:e.V8??0,V9:e.V9??0,V10:e.V10??0,V11:e.V11??0,V12:e.V12??0,V13:e.V13??0,V14:e.V14??0,V15:e.V15??0,V16:e.V16??0,V17:e.V17??0,V18:e.V18??0,V19:e.V19??0,V20:e.V20??0,V21:e.V21??0,V22:e.V22??0,V23:e.V23??0,V24:e.V24??0,V25:e.V25??0,V26:e.V26??0,V27:e.V27??0,V28:e.V28??0,Amount:a,Time:e.Time??e.time??0}:(0,x.extractFeatures)({amount:a,time:e.time,card_bin:e.card_bin,customer_ip:e.customer_ip,customer_email:e.customer_email,customer_country:e.customer_country,device_fingerprint:e.device_fingerprint});let n=(0,x.predictFraud)(r),i=Math.min(Math.max(n.probability,0),1);return{index:t,transaction_id:e.transaction_id||`batch_${t}`,amount:a,fraud_probability:Number(i.toFixed(4)),risk_score:Math.round(100*i),risk_level:(0,x.getRiskLevel)(i),decision:(0,x.getDecision)(i),actual_class:e.Class}}),n=Math.round(performance.now()-t),i={total:a.length,approved:a.filter(e=>"approve"===e.decision).length,review:a.filter(e=>"review"===e.decision).length,declined:a.filter(e=>"decline"===e.decision).length,avg_fraud_probability:Number((a.reduce((e,t)=>e+t.fraud_probability,0)/a.length).toFixed(4))},s=a.filter(e=>void 0!==e.actual_class),o=null;if(s.length>0){let e=s.filter(e=>1===e.actual_class&&"decline"===e.decision).length,t=s.filter(e=>0===e.actual_class&&"approve"===e.decision).length,r=s.filter(e=>0===e.actual_class&&"approve"!==e.decision).length,a=s.filter(e=>1===e.actual_class&&"approve"===e.decision).length,n=e/(e+r)||0,i=e/(e+a)||0;o={accuracy:(e+t)/s.length,precision:n,recall:i,f1_score:n*i*2/(n+i)||0,confusion_matrix:{true_positives:e,true_negatives:t,false_positives:r,false_negatives:a}}}return v.NextResponse.json({batch_id:crypto.randomUUID(),model_version:x.MODEL_CONFIG.version,results:a,statistics:i,accuracy_metrics:o,processing_time_ms:n,avg_time_per_transaction:Number((n/a.length).toFixed(2)),timestamp:new Date().toISOString()})}catch(e){return console.error("Batch analyze error:",e),v.NextResponse.json({error:"Internal server error",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["POST",()=>R],23914);var b=e.i(23914);let y=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/batch-analyze/route",pathname:"/api/batch-analyze",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/batch-analyze/route.ts",nextConfigOutput:"",userland:b}),{workAsyncStorage:w,workUnitAsyncStorage:M,serverHooks:E}=y;function C(){return(0,a.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:M})}async function A(e,t,a){y.isDev&&(0,n.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let v="/api/batch-analyze/route";v=v.replace(/\/index$/,"")||"/";let x=await y.prepare(e,t,{srcPage:v,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:b,nextConfig:w,parsedUrl:M,isDraftMode:E,prerenderManifest:C,routerServerContext:A,isOnDemandRevalidate:N,revalidateOnlyGenerated:k,resolvedPathname:T,clientReferenceManifest:O,serverActionsManifest:P}=x,I=(0,l.normalizeAppPath)(v),j=!!(C.dynamicRoutes[I]||C.routes[T]),S=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,M,!1):t.end("This page could not be found"),null);if(j&&!E){let e=!!C.routes[T],t=C.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(w.experimental.adapterPath)return await S();throw new _.NoFallbackError}}let D=null;!j||y.isDev||E||(D="/index"===(D=T)?"/":D);let U=!0===y.isDev||!j,q=j&&!U;P&&O&&(0,s.setReferenceManifestsSingleton)({page:v,clientReferenceManifest:O,serverActionsManifest:P,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:P})});let F=e.method||"GET",H=(0,i.getTracer)(),$=H.getActiveScopeSpan(),K={params:b,prerenderManifest:C,renderOpts:{experimental:{authInterrupts:!!w.experimental.authInterrupts},cacheComponents:!!w.cacheComponents,supportsDynamicResponse:U,incrementalCache:(0,n.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:w.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>y.onRequestError(e,t,a,A)},sharedContext:{buildId:R}},L=new c.NodeNextRequest(e),B=new c.NodeNextResponse(t),W=u.NextRequestAdapter.fromNodeNextRequest(L,(0,u.signalFromNodeResponse)(t));try{let s=async e=>y.handle(W,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=H.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${F} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${F} ${v}`)}),o=!!(0,n.getRequestMeta)(e,"minimalMode"),l=async n=>{var i,l;let c=async({previousCacheEntry:r})=>{try{if(!o&&N&&k&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await s(n);e.fetchMetrics=K.renderOpts.fetchMetrics;let l=K.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let c=K.renderOpts.collectedTags;if(!j)return await (0,V.sendResponse)(L,B,i,K.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(i.headers);c&&(t[g.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=g.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,a=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=g.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:f.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await y.onRequestError(e,t,{routerKind:"App Router",routePath:v,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:N})},A),t}},u=await y.handleResponse({req:e,nextConfig:w,cacheKey:D,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:C,isRoutePPREnabled:!1,isOnDemandRevalidate:N,revalidateOnlyGenerated:k,responseGenerator:c,waitUntil:a.waitUntil,isMinimalMode:o});if(!j)return null;if((null==u||null==(i=u.value)?void 0:i.kind)!==f.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==u||null==(l=u.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",N?"REVALIDATED":u.isMiss?"MISS":u.isStale?"STALE":"HIT"),E&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let d=(0,h.fromNodeOutgoingHttpHeaders)(u.value.headers);return o&&j||d.delete(g.NEXT_CACHE_TAGS_HEADER),!u.cacheControl||t.getHeader("Cache-Control")||d.get("Cache-Control")||d.set("Cache-Control",(0,m.getCacheControlHeader)(u.cacheControl)),await (0,V.sendResponse)(L,B,new Response(u.value.body,{headers:d,status:u.value.status||200})),null};$?await l($):await H.withPropagatedContext(e.headers,()=>H.trace(d.BaseServerSpan.handleRequest,{spanName:`${F} ${v}`,kind:i.SpanKind.SERVER,attributes:{"http.method":F,"http.target":e.url}},l))}catch(t){if(t instanceof _.NoFallbackError||await y.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:q,isOnDemandRevalidate:N})}),j)throw t;return await (0,V.sendResponse)(L,B,new Response(null,{status:500})),null}}e.s(["handler",()=>A,"patchFetch",()=>C,"routeModule",()=>y,"serverHooks",()=>E,"workAsyncStorage",()=>w,"workUnitAsyncStorage",()=>M],53553)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__47e1e9d9._.js.map